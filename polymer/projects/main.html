

<link rel="import" href="https://storage.googleapis.com/mindale/polymer/bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="https://storage.googleapis.com/mindale/polymer/bower_components/paper-dialog/paper-dialog-transition.html">
<link rel="import" href="https://storage.googleapis.com/mindale/polymer/bower_components/paper-input/paper-input.html">

<link rel="import" href="https://storage.googleapis.com/mindale/polymer/bower_components/core-icons/core-icons.html">
<link rel="import" href="https://storage.googleapis.com/mindale/polymer/bower_components/paper-button/paper-button.html">



<polymer-element name="projects-main" attributes="api project_id">
	

	<template>
        <style>


              paper-button{
                background: #4285f4;
                color: #fff;

              }
             
        </style>


        <div>{{project_id}}</div>
       

        <paper-button class="colored" label="Create New Query" on-tap={{openDialog}}></paper-button>



          <paper-dialog id="createDialog" heading="Create new Query" transition="paper-dialog-transition-center">
            

            <paper-input id="createText" label="Type new query text"></paper-input>
            
            <paper-button label="Create" on-tap={{create}} affirmative autofocus></paper-button>

          </paper-dialog>



    </template>

    <script>

         Polymer({
            
       
            apiChanged: function () {

                if (!this.api) {
                    return false;
                }

                this.getList();
            },


            getList: function () {

                if (!this.project_id){
                    return false;
                }

                var request = this.api.params.custom.list({"Project_id": this.project_id.toString(), "Limit": 1000});
                
                request.execute(function (resp) {
                
                    this.Items = resp.Items;                    

                }.bind(this));

                
            },
                  

            openDialog: function(){

                this.$.createText.value = "";

                this.$.createDialog.toggle();

            },


             create: function(){
                
                var new_name = this.$.createText.value;

                console.log("new Custom: " + new_name);

                var request = this.api.params.custom.create({"Name": new_name, "Project_id": this.project_id.toString() });

                  request.execute(function (resp) {

                    console.log('Custom created: '  + new_name);

                    this.getList();

                  }.bind(this));
           

              }



          });

    </script>

</polymer-element>